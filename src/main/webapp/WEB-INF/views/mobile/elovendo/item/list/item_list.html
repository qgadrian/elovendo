<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">

<head>
<meta charset="UTF-8" />
<title>Ver anuncios</title>

<link rel="shortcut icon" type="image/x-icon" href="/images/webimg/favicon.ico" />

<!-- ************************* -->
<!-- ******* Bootstrap ******* -->
<!-- ************************* -->

<!-- Javascript -->
<script src="/js/jquery-1.11.0.min.js"></script>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"/>
<!-- Latest compiled and minified JavaScript -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

<!-- ************************* -->
<!-- ********** Web ********** -->
<!-- ************************* -->

<!-- Web style -->
<link rel="stylesheet" type="text/css" href="/css/styleweb.css"/>
<link rel="stylesheet" type="text/css" href="/css/bootstrap-extra.css"/>
<!-- Form -->
<!-- <link rel="stylesheet" href="/css/pagination.css" /> -->
<!-- <link rel="stylesheet" href="/css/styleList.css" /> -->

<!-- Styles -->
<link rel="stylesheet" type="text/css" href="/css/headerStyle.css" media="screen" />



<script src="/js/filter.js"></script>

</head>
<!-- <body class="homepage"> -->
<body style="background-color:#FBFAF9;">

	<!-- Header -->
	<div th:replace="elovendo/header"></div>
	
	<div class="container">
		<div class="row">
			<!-- Filter -->
			<div class="col-xs-4 col-md-4" >
				<!-- title -->
				<div class="row">
						<div class="col-xs-12">
							<h1><small>Filtrar</small></h1>
							<hr class="colorgraph"/>
						</div>
				</div>
				<div class="row">
					<div class="col-xs-12 col-md-12">
						<div class="form-group">
    						<label for="exampleInputEmail1">Provincia</label>
							<select id="provinceSelect" class="form-control">
								<option value=""> Selecciona provincia </option> 
								<option th:each="province : ${provinces}" th:value="${province.provinceName}" 
								th:text="${province.provinceName}"> Province </option>
							</select>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-xs-12 col-md-12">
						<div class="form-group">
							<label for="exampleInputEmail1">Subcategoría</label>
							<form>
								<select id="categorySelect" class="form-control">
									<option value=""> Selecciona subcategoría </option> 
									<option th:each="subCategory : ${subCategories}" 
									th:value="${subCategory.subCategoryName}"  th:text="${subCategory.subCategoryName}"> 
									SubCategory </option>
								</select>
							</form>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-xs-12 col-md-12">
						<div class="form-group">
							<label for="exampleInputEmail1">Precio</label>
							<form class="form-inline"
								th:action="@{'/bazaar/' + ${url}}" method="GET" name="prizeForm"
								onsubmit="submitSearchForm()">
									<input type="number" min="0" class="form-control"
										placeholder="Mínimo" th:value="${prizeMin}"
										name="min" style="max-width:100px;"/> 
									<input type="number" min="0" class="form-control"
										placeholder="Máximo" th:value="${prizeMax}"
										name="max" style="max-width:100px;"/>
								<button type="submit" class="btn btn-default">Filtrar precio</button>
							</form>
						</div>
					</div>
				</div>
<!-- 				<div class="row top-buffer"> -->
				<!-- FEATURED -->
<!-- 				<div class="row"> -->
<!-- 					<div class="col-xs-12 col-md-12 text-center" style="margin-bottom:20px;"> -->
<!-- 						<h1 style="font-family: 'Andika', sans-serif; color: #6A016F">PATROCINADOS</h1><hr/> -->
<!-- 					</div> -->
<!-- 				</div> -->
				<!-- title -->
				<div class="row">
					<div class="col-xs-12">
						<h1><small>Te puede interesar</small></h1>
						<hr class="colorgraph"/>
					</div>
				</div>
				
				<div class="row" th:each="item : ${featuredItems}">
					<div class="col-xs-12 col-md-12">
						<div class="featuredSection">
							<div class="thumbnail">
								<a th:href="@{'/bazaar/item/' + ${item.itemId}}">
									<img data-src="holder.js/300x300" alt="..." 
									th:src="@{'http://83.165.60.132:8080/' + ${item.imgHome200h}}"/>
								</a>
								<div class="caption">
									<h3 th:text="${item.title}">Title</h3>
									<p th:if="${#strings.length(item.description)} &gt; 99" 
										th:utext="${#strings.substring(item.description, 0, 100)}"
										class="featuredTextDesc">Description</p>
									<p th:if="${#strings.length(item.description)} &lt; 100" 
										th:utext="${item.description}" class="featuredTextDesc">Description</p>
									<p>
										<a href="#" class="btn btn-default" role="button">Ver anuncio</a>
										<button class="btn btn-primary" data-toggle="modal" 
										data-target="#myModal">Enviar mensaje</button>
									</p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- Stuff list -->
			<div class="col-xs-8 col-md-8">
				<div class="row" th:each="item : ${itemsList}">
					<div class="col-xs-12 col-md-12">
<!-- 						<div class="thumbnail featuredThumbnail"> -->
						<div th:class="${item.highlight}? 'thumbnail featuredThumbnail' : 'thumbnail'">
							<div class="row">
								<div class="col-xs-4">
									<div class="thumbnail pull-left" style="min-height: 210px; max-height: 210px; width: 210px">
										<a th:href="@{'/bazaar/item/' + ${item.itemId}}">
											<img data-src="holder.js/300x300" alt="Image" 
											th:src="@{'http://83.165.60.132:8080/' + ${item.imgHome200h}}"
											style="max-height: 200px; width: 200px; text-align:center; vertical-align: middle;"/>
										</a>
									</div>
								</div>
								<div class="col-xs-8">
									<!-- favorite -->
<!-- 									<button onclick="favClick(this)" type="submit" class="btn btn-danger btn-m pull-right" -->
<!-- 									th:value="${item.itemId}" data-toggle="button"> -->
<!-- 									<i class="glyphicon glyphicon-heart-empty"></i></button> -->
									<div class="btn-group pull-right" data-toggle="buttons">
  										<label class="btn btn-danger btn-m">
  											<input onchange="favClick(this)" type="checkbox" th:value="${item.itemId}"/>
  											<i th:id="'i'+${item.itemId}" class="glyphicon glyphicon-heart-empty"></i>
  										</label>
  									</div>
									<!--  User info -->
									<div class="row" style="margin-top: 10px;">
										<div class="col-xs-4 col-md-4 userPicMin" style="width: 80px; margin-right: 10px;">
											<img data-src="holder.js/50x50" alt="Profile pic"
												th:src="@{'http://83.165.60.132:8080/' + ${item.user.avatar}}"/>
										</div>
										<div class="col-xs-8 col-md-8">
											<div class="row">
												<div class="col-xs-12 col-md-12">
													<p class="pull-left">Creado por <span th:text="${item.user.login}">user</span></p>
												</div>
												<div class="col-xs-12 col-md-12">
													<p class="pull-left">
														<span
															th:text="${#calendars.format(item.startDate, 'dd MMMM yyyy')}">
															fecha</span> a las <span
															th:text="${#calendars.format(item.startDate, 'HH:mm')}">
															hora</span>
													</p>
												</div>
											</div>
										</div>
									</div>
									<!--  Caption -->
									<div class="caption">
										<div class="row">
											<div class="col-xs-8 col-md-8">
												<h3 th:text="${item.title}">Title</h3>
											</div>
										</div>
										<!--  Item info -->
										<div class="row">	
											<p th:if="${#strings.length(item.plainDescription)} &gt; 99" 
												th:utext="${#strings.substring(item.plainDescription, 0, 100)} + '(...)'"
												class="mediumTextDesc">Description</p>
											<p th:if="${#strings.length(item.plainDescription)} &lt; 100" 
												th:utext="${item.plainDescription}"
												class="mediumTextDesc">Description</p>
										</div>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-xs-12" style="margin-bottom: 10px;">
									<h2 style="display: inline; margin-left: 10px;">
<!-- 											<span class="label label-info"> -->
<!-- 												<span class="label label-info" th:text="${item.prize} + ' €'"></span> -->
												<span class="label label-info" 
												th:text="${#numbers.formatDecimal(item.prize, 0, 'COMMA', 0, 'POINT')} + ' €'"></span>
<!-- 											 	<i class="glyphicon glyphicon-euro"></i></span> -->
										</h2>
									<h3 th:if="${item.user.phone} != null" style="display: inline; ">
										<span class="label label-success">
										<i class="glyphicon glyphicon-phone"></i> Whatssap</span>
									</h3>
									<h3 th:if="${item.user.userValue} &gt; 70" style="display: inline;" 
									onmouseover="mouseHover()"><span class="label label-rep">
										<i class="glyphicon glyphicon-thumbs-up"></i> Reputado
										</span>
									</h3>
									<div class="btn-group pull-right" style="margin-right: 10px;">
										<a th:href="@{'/bazaar/item/' + ${item.itemId}}" class="btn btn-default"
											role="button">Ver anuncio</a>
										<button class="btn btn-primary" role="button"
										data-toggle="modal" data-target="#myModal">Enviar mensaje</button>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-xs-12 col-md-12">
				<div class="text-center">
					<div id="contentPagination">
						<ul class="pagination pagination-lg">
							<li th:class="${page.firstPage}? 'active' : ''"><span
								th:if='${page.firstPage}'>← First</span> <a
								th:if='${not page.firstPage}'
								th:href='@{${page.url}(p=0,s=${page.size})}'>← First</a></li>
							<li th:class="${page.hasPreviousPage}? '' : 'active'"><span
								th:if='${not page.hasPreviousPage}'>«</span> <a
								th:if='${page.hasPreviousPage}'
								th:href='@{${page.url}(p=${page.number-2},s=${page.size})}'
								title='Go to previous page'>«</a></li>
							<li th:each="item : ${page.items}"
								th:class="${item.current}? 'active' : ''"><span
								th:if='${item.current}' th:text='${item.number}'>1</span> <a
								th:if='${not item.current}'
								th:href='@{${page.url}(p=${item.number}-1,s=${page.size})}'><span
									th:text='${item.number}'>1</span></a></li>
							<li th:class="${page.hasNextPage}? '' : 'active'"><span
								th:if='${not page.hasNextPage}'>»</span> <a
								th:if='${page.hasNextPage}'
								th:href='@{${page.url}(p=${page.number},s=${page.size})}'
								title='Go to next page'>»</a></li>
							<li th:class="${page.lastPage}? 'active' : ''"><span
								th:if='${page.lastPage}'>Last →</span> <a
								th:if='${not page.lastPage}'
								th:href='@{${page.url}(p=${page.totalPages-1},s=${page.size})}'>Last
									→</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">Enviar mensaje</h4>
      </div>
      <div class="modal-body">
      	<form role="form" th:action="@{/elovendo/message/send}" method="post" accept-charset="UTF-8">
      	<!-- If not loggued ask for email -->
      	<div th:if="${#httpServletRequest.remoteUser == null}">
	      	  <div class="form-group">
			    <label for="exampleInputEmail1">Email</label>
			    <input type="email" class="form-control" id="anomEmail" placeholder="Tu email..."/>
			  </div>
			  <div class="form-group">
			    <label for="exampleInputEmail1">Nombre</label>
			    <input type="text" class="form-control" id="receiver" name="receiver" placeholder="Tu nombre..."/>
			  </div>
		  </div>
		  <div class="form-group">
		    <label for="exampleInputPassword1">Mensaje</label>
		    	<textarea id="textarea" class="form-control textarea" rows="10" name="messageText"
						required="required" placeholder="Tu mensaje..." maxlength="1000"></textarea>
		  </div>
		  <div class="checkbox">
		    <label>
		      <input type="checkbox"/> Acepto las condiciones de uso
		    </label>
		  </div>
		  <button type="submit" class="btn btn-default">Submit</button>
		</form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-primary">Enviar</button>
      </div>
    </div>
  </div>
</div>
	
	<script type="text/javascript">
		function mouseHover() {
			console.log("rep hover");
		}
		
		function favClick(toggle) {
			console.log("clicked fav at " + toggle.value);
			if (toggle.checked)
				document.getElementById('i'+toggle.value).className = "glyphicon glyphicon-heart";
			else
				document.getElementById('i'+toggle.value).className = "glyphicon glyphicon-heart-empty";
			
		}
	</script>

</body>
</html>