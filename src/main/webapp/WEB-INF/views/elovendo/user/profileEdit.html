<!DOCTYPE HTML>

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"
	xmlns:form="http://www.springframework.org/tags/form">
<head>
<title>Registrarse en Elovendo</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />

<!-- <script src="/js/imagePreview.js"></script> -->

<!-- Form -->
<!-- <link rel="stylesheet" href="/css/formStyle.css" /> -->

<link href="/css/styleweb.css" media="all" rel="stylesheet" type="text/css" />

<!-- ************************* -->
<!-- ******* Bootstrap ******* -->
<!-- ************************* -->

<!-- Javascript -->
<script src="/js/jquery-1.11.1.min.js"></script>
<!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script> -->
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"/>
<!-- Latest compiled and minified JavaScript -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<!-- Bootstrap extra (bs-callout) -->
<link href="/css/bootstrap-extra.css" media="all" rel="stylesheet" type="text/css" />

<!-- File input -->
<link href="/css/fileinput.min.css" media="all" rel="stylesheet" type="text/css" />
<script src="/js/fileinput.min.js" type="text/javascript"></script>

<!-- Switch -->
<link href="/css/bootstrap-switch.css" rel="stylesheet"/>
<script src="/js/bootstrap-switch.js"></script>

</head>

<body>

	<div th:replace="elovendo/header"></div>

	<div class="row">
		<div class="col-xs-12 col-md-12 text-center"
			style="margin-bottom: 20px;">
			<h1>Editar perfil</h1>
			<hr class="hrStyle2" />
		</div>
	</div>

	<div class="container">
		<div class="row text-center">
			<form class="form-horizontal userPic" role="form" id="registrationform" th:action="@{/site/profile/user/edit}" 
				method="post" enctype="multipart/form-data" accept-charset="UTF-8" >
				<img th:unless="${session.socialUser}" alt="profile pic"  th:src="@{'http://www.elovendo.com/' + ${user.avatar}}" />
				<img th:if="${session.socialUser}" alt="profile pic"  th:src="${session.largeSocialAvatar}" />
				<h1 th:text="${user.login}">Editar perfil</h1>
				<hr class="hrStyle"/>
				<!-- Username 2-20 characters -->
<!-- 				<div class="col-sm-8 col-sm-offset-2" th:if="${#fields.hasErrors('user.login')}"> -->
<!-- 					<div class="alert alert-danger" role="alert"> -->
<!-- 						<span class="alert-link" role="alert" th:errors="${user.login}">Error</span> -->
<!-- 					</div> -->
<!-- 				</div> -->
				<!-- Password (UpperCase, LowerCase, Number/SpecialChar and min 8 Chars) -->
<!-- 				<div class="col-sm-8 col-sm-offset-2" th:if="${#fields.hasErrors('user.password')}"> -->
<!-- 					<div class="alert alert-danger" role="alert"> -->
<!-- 						<span class="alert-link" role="alert" th:errors="${user.password}">Error</span> -->
<!-- 					</div> -->
<!-- 				</div> -->
				<div class="form-group">
					<div class="col-sm-8 col-sm-offset-2">
						<label for="password" class="col-sm-2 control-label" th:text="#{label.password}">Password</label> 
						<div class="col-sm-8">
							<input th:unless="${#fields.hasErrors('user.password')}" class="form-control" 
							id="password" name="password" type="password" 
							placeholder="Contraseña" th:title="#{password.invalid}"
							pattern="(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$" />
							<div th:if="${#fields.hasErrors('user.password')}"
								class="form-group has-error">
								<label class="control-label" for="inputError1"
									th:errors="${user.password}"
									style="text-align: center !important">Input with error</label>
								<input class="form-control" id="password"
									name="password" type="password"
									placeholder="Contraseña"
									th:title="#{password.invalid}"
									pattern="(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$" />
							</div>
						</div>
					</div>
				</div>
				<div class="form-group">
					<div class="col-sm-8 col-sm-offset-2">
						<label for="confirmPassword" class="col-sm-2 control-label" 
							th:text="#{label.confirmPassword}">Confirm Password</label> 
						<div class="col-sm-8">
							<input th:unless="${#fields.hasErrors('user.confirmPassword')}" class="form-control" 
							id="confirmPassword" name="confirmPassword" type="password" 
							placeholder="Contraseña" th:title="#{password.invalid}"
							pattern="(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$" />
							<div th:if="${#fields.hasErrors('user.confirmPassword')}"
								class="form-group has-error">
								<label class="control-label" for="inputError1"
									th:errors="${user.confirmPassword}"
									style="text-align: center !important">Input with error</label>
								<input class="form-control" id="confirmPassword"
									name="confirmPassword" type="password"
									placeholder="Contraseña"
									th:title="#{password.invalid}"
									pattern="(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$" />
							</div>
						</div>
					</div>
				</div>
				<div class="form-group">
					<div class="col-sm-8 col-sm-offset-2">
						<label for="email" class="col-sm-2 control-label"
							th:text="#{label.email}">Email Address</label>
						<div class="col-sm-8">
<!-- 							<input class="form-control" type="email" id="email" -->
<!-- 								th:title="#{email.invalid}" th:field="${user.email}" -->
<!-- 								placeholder="Correo electrónico" th:value="${user.email}" />  -->
							<input th:unless="${#fields.hasErrors('user.email')}"
								class="form-control" type="email" id="email"
								th:title="#{email.invalid}" th:field="${user.email}"
								placeholder="Correo electrónico" th:value="${user.email}" />
							<div th:if="${#fields.hasErrors('user.email')}"
								class="form-group has-error">
								<label class="control-label" for="emailError"
									th:errors="${user.email}"
									style="text-align: center !important">Input with error</label>
								<input class="form-control" class="form-control" type="email"
									id="email" th:title="#{email.invalid}" th:field="${user.email}"
									placeholder="Correo electrónico" th:value="${user.email}" />
							</div>
						</div>
					</div>
				</div>
				<h2><small>Información básica</small></h2>
				<hr />
				<div class="form-group">
					<div class="col-sm-8 col-sm-offset-2">
						<label for="firstName" class="col-sm-2 control-label" th:text="#{label.firstName}">Nombre</label>
						<div class="col-sm-8">
							<input class="form-control" id="firstName" name="firstName" type="text" 
							th:field="${user.firstName}" placeholder="Tu nombre" th:value="${user.firstName}"/>
<!-- 							<span th:if="${#fields.hasErrors('user.login')}" th:errors="${user.login}">Error</span> -->
						</div>
					</div>
				</div>
				<div class="form-group">
					<div class="col-sm-8 col-sm-offset-2">
						<label for="lastName" class="col-sm-2 control-label" th:text="#{label.lastName}">Apellidos</label>
						<div class="col-sm-8">
							<input class="form-control" id="lastName" name="lastName" type="text" 
							th:field="${user.lastName}" placeholder="Tus apellidos" th:value="${user.lastName}"/>
<!-- 							<span th:if="${#fields.hasErrors('user.login')}" th:errors="${user.login}">Error</span> -->
						</div>
					</div>
				</div>
				<div class="form-group">
					<div class="col-sm-8 col-sm-offset-2">
						<label for="phone" class="col-sm-2 control-label" th:text="#{label.phone}">Teléfono</label>
						<div class="col-sm-8">
							<input type="number" class="form-control" id="phone" name="phone" min="0"
							th:field="${user.phone}" placeholder="Móvil" th:value="${user.phone}"/>
<!-- 							<span th:if="${#fields.hasErrors('user.login')}" th:errors="${user.login}">Error</span> -->
						</div>
					</div>
				</div>
				<div class="form-group">
					<div class="col-sm-8 col-sm-offset-2">
						<label for="phone" class="col-sm-8 control-label">¿Quieres marcarte como usuario de whatssap con tu número de teléfono?
						Los usuarios podrán enviarte mensajes a Whatssap directamente desde nuestra aplicación.</label>
						<div class="col-sm-2">
							<div class="pull-right has-success">
								<input id="uw" type="checkbox" name="uw" data-on-text="Sí"
									data-off-text="No" data-on-color="success"
									data-off-color="warning" />
							</div>
						</div>
					</div>
				</div>
				<!-- 				<div class="col-sm-8 col-sm-offset-2" th:if="${#fields.hasErrors('profilePic')}"> -->
<!-- 					<div class="alert alert-danger" role="alert"> -->
<!-- 							<span class="alert-link" role="alert" th:errors="${profilePic}">Error</span> -->
<!-- 					</div> -->
<!-- 				</div> -->
				<div th:unless="${session.socialUser}" class="form-group">
					<div class="col-sm-8 col-sm-offset-2">
						<label for="profilePic" class="col-sm-2 control-label" th:text="#{label.profilePic}">Profile pic</label> 
						<div class="col-sm-8">
							<input id="profilePic" type="file" class="file" data-show-upload="false" name="userPic"/>
						</div>
					</div>
				</div>

				<div class="col-sm-6 col-sm-offset-3">
					<button id="buttonRegister" type="submit" 
					class="btn btn-success btn-lg btn-block web-top-margin">Confirmar</button>
					<hr/>
				</div>
			</form>
		</div>
		
		<script th:inline="javascript">
			/*<![CDATA[*/
				var c = /*[[${uw}]]*/ false;
			/*]]>*/
			
			var pdis = $('#phone').val() == '' ? true : false;

			$("[name='uw']").bootstrapSwitch({
				state : c,
				disabled : pdis
			});
			$('input[name="uw"]').bootstrapSwitch('state', c, true);

			$('#phone').on("change", function() {
				var val = $(this).val();
				console.log("val is '" + val + "'!");
				if (val.length > 0) {
					$("[name='uw']").bootstrapSwitch('disabled', false, true);
				} else {
					$("[name='uw']").bootstrapSwitch('disabled', true, true);
				}
			});
		</script>
	</div>


</body>
</html>