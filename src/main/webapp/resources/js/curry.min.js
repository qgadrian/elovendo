/*!
 * Curry currency conversion jQuery Plugin v0.8
 * https://bitbucket.org/netyou/curry-currency-ddm
 *
 * Copyright 2014, NetYou
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */
(function(c){c.fn.curry=function(n){window.jQCurryPluginCache||(window.jQCurryPluginCache=[{},!1]);var g="",k={},u=window.jQCurryPluginCache[1],p=c(document),e,l,r,m,s,h=c.extend({target:".price",change:!0,base:"USD",symbols:{}},n);this.each(function(){var b=c(this),a=b.attr("id"),f=b.attr("class"),a=""+(a?' id="'+a+'"':"");f?(a+=' class="curry-ddm',a=f?a+(" "+f+'"'):a+'"'):a+="";g="<select"+a+"></select>";f=c(g).insertAfter(b);b.detach();e=e?e.add(f):f});var q=function(b){g="";e.each(function(){for(m in b)s=
b[m],g+='<option value="'+m+'" data-rate="'+s+'">'+m+"</option>";c(g).appendTo(this)})};if(h.customCurrency)q(h.customCurrency);else if(u)p.on("jQCurryPlugin.gotRates",function(){q(window.jQCurryPluginCache[0])});else n=c.ajax({url:"http://query.yahooapis.com/v1/public/yql",dataType:"jsonp",data:{q:'select * from yahoo.finance.xchange where pair="USDINR,USDEUR,USDCAD,USDGBP,USDILS"',format:"json",env:"store://datatables.org/alltableswithkeys"}}),window.jQCurryPluginCache[1]=!0,n.done(function(b){b=
b.query.results.rate;k[h.base]=1;for(var a=0,c=b.length;a<c;a++)l=b[a],r=l.Name.substr(l.Name.length-3),k[r]=+l.Rate;q(k);window.jQCurryPluginCache[0]=k;p.trigger("jQCurryPlugin.gotRates")}).fail(function(b){console.log(b)});if(h.change){var v=c.extend({USD:"&#36;",GBP:"&pound;",EUR:"&euro;",JPY:"&yen;"},h.symbols),t;p.on("change",this.selector,function(){for(var b=c(h.target),a=c(this).find(":selected"),f=a.data("rate"),d,g=b.length,e=0;e<g;e++)$price=c(b[e]),d=$price.text(),d=Number(d.replace(/[^0-9\.]+/g,
"")),$price.data("base-figure")?d=f*$price.data("base-figure"):($price.data("base-figure",d),d*=f),d=Number(d.toString().match(/^\d+(?:\.\d{0,2})?/)),t=v[a.val()]||a.val(),$price.html('<span class="symbol">'+t+"</span>"+d)})}return e}})(jQuery);